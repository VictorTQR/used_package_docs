---
package_name: Dexie.js
language: JavaScript
url: https://github.com/dexie/Dexie.js/
source: z.ai(glm-5)
---

æˆ‘å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªå®Œæ•´çš„ã€å¯è¿è¡Œçš„ Dexie.js ç¤ºä¾‹ï¼Œæ¶µç›–ä»å®‰è£…åˆ°é«˜çº§åŠŸèƒ½çš„å…¨æµç¨‹ã€‚è¿™ä¸ªç¤ºä¾‹å°†æ„å»ºä¸€ä¸ªâ€œæœ‹å‹ç®¡ç†â€åº”ç”¨ï¼Œå……åˆ†å±•ç¤º Dexie.js çš„æ ¸å¿ƒèƒ½åŠ›ã€‚

## ğŸ“¦ ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…

Dexie.js æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ IndexedDB å°è£…åº“ï¼Œå®ƒå°†å¤æ‚çš„ IndexedDB API ç®€åŒ–ä¸ºç®€æ´çš„ Promise-based APIã€turn0search7ã€‘ã€‚

### å®‰è£…æ–¹å¼

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€å®‰è£… Dexie.jsï¼š

**æ–¹å¼ä¸€ï¼šé€šè¿‡ npm å®‰è£…**
```bash
npm install dexie
```

**æ–¹å¼äºŒï¼šé€šè¿‡ CDN ç›´æ¥å¼•å…¥**
```html
<!-- åœ¨ HTML æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥ -->
<script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
```

## ğŸ—„ï¸ äºŒã€æ•°æ®åº“åˆå§‹åŒ–ä¸è¡¨ç»“æ„å®šä¹‰

åˆ›å»ºæ•°æ®åº“å®ä¾‹å¹¶å®šä¹‰è¡¨ç»“æ„æ˜¯ä½¿ç”¨ Dexie.js çš„ç¬¬ä¸€æ­¥ã€‚

```javascript
// å¯¼å…¥ Dexieï¼ˆES6 æ¨¡å—æ–¹å¼ï¼‰
import Dexie from 'dexie';

// åˆ›å»ºæ•°æ®åº“å®ä¾‹
const db = new Dexie('FriendDatabase');

// å®šä¹‰æ•°æ®åº“ç‰ˆæœ¬å’Œè¡¨ç»“æ„
db.version(1).stores({
  // friends è¡¨ï¼š++id è¡¨ç¤ºè‡ªå¢ä¸»é”®ï¼Œname å’Œ age æ˜¯ç´¢å¼•å­—æ®µ
  friends: '++id, name, age, email, *tags',
  // gameSessions è¡¨ï¼šid æ˜¯ä¸»é”®ï¼Œscore æ˜¯ç´¢å¼•å­—æ®µ
  gameSessions: 'id, score, playedAt'
});

// æ‰“å¼€æ•°æ®åº“
db.open().then(() => {
  console.log('æ•°æ®åº“æ‰“å¼€æˆåŠŸ');
}).catch(err => {
  console.error('æ•°æ®åº“æ‰“å¼€å¤±è´¥:', err);
});
```

**å…³é”®æ¦‚å¿µè¯´æ˜**ï¼š
- `++id`: è‡ªå¢ä¸»é”®ã€turn0search0ã€‘
- `*tags`: å¤šå€¼ç´¢å¼•ï¼Œé€‚åˆæ•°ç»„å­—æ®µã€turn0search23ã€‘
- `[name+age]`: å¤åˆç´¢å¼•ï¼Œç”¨äºå¤šå­—æ®µç»„åˆæŸ¥è¯¢ã€turn0search0ã€‘

## âœï¸ ä¸‰ã€åŸºç¡€ CRUD æ“ä½œ

### 1. åˆ›å»ºï¼ˆCreateï¼‰

```javascript
// å•æ¡æ·»åŠ 
async function addFriend() {
  try {
    const id = await db.friends.add({
      name: 'å¼ ä¸‰',
      age: 25,
      email: 'zhangsan@example.com',
      tags: ['å‰ç«¯', 'å¼€å‘']
    });
    console.log(`æ·»åŠ æˆåŠŸï¼ŒID: ${id}`);
  } catch (error) {
    console.error('æ·»åŠ å¤±è´¥:', error);
  }
}

// æ‰¹é‡æ·»åŠ 
async function bulkAddFriends() {
  const friends = [
    { name: 'æå››', age: 30, email: 'lisi@example.com', tags: ['åç«¯'] },
    { name: 'ç‹äº”', age: 28, email: 'wangwu@example.com', tags: ['å…¨æ ˆ'] }
  ];
  
  try {
    const lastId = await db.friends.bulkAdd(friends);
    console.log('æ‰¹é‡æ·»åŠ æˆåŠŸï¼Œæœ€åä¸€æ¡ ID:', lastId);
  } catch (error) {
    console.error('æ‰¹é‡æ·»åŠ å¤±è´¥:', error);
  }
}
```

### 2. è¯»å–ï¼ˆReadï¼‰

```javascript
// è·å–æ‰€æœ‰æœ‹å‹
async function getAllFriends() {
  const allFriends = await db.friends.toArray();
  console.log('æ‰€æœ‰æœ‹å‹:', allFriends);
  return allFriends;
}

// æŒ‰ä¸»é”®è·å–å•ä¸ªæœ‹å‹
async function getFriendById(id) {
  const friend = await db.friends.get(id);
  console.log(`ID ä¸º ${id} çš„æœ‹å‹:`, friend);
  return friend;
}

// æŒ‰æ¡ä»¶æŸ¥è¯¢
async function getYoungFriends() {
  // æŸ¥è¯¢å¹´é¾„å°äº 30 çš„æœ‹å‹
  const youngFriends = await db.friends
    .where('age')
    .below(30)
    .toArray();
  console.log('å¹´é¾„å°äº 30 çš„æœ‹å‹:', youngFriends);
  return youngFriends;
}
```

### 3. æ›´æ–°ï¼ˆUpdateï¼‰

```javascript
// æ›´æ–°å•ä¸ªè®°å½•
async function updateFriendAge(id, newAge) {
  try {
    const updated = await db.friends.update(id, { age: newAge });
    if (updated) {
      console.log(`ID ${id} æ›´æ–°æˆåŠŸ`);
    } else {
      console.log(`æœªæ‰¾åˆ° ID ${id} çš„è®°å½•`);
    }
  } catch (error) {
    console.error('æ›´æ–°å¤±è´¥:', error);
  }
}

// æ‰¹é‡ä¿®æ”¹
async function bulkUpdateFriends() {
  // å°†æ‰€æœ‰å¹´é¾„å°äº 25 å²çš„æœ‹å‹æ ‡è®°ä¸º"é’å¹´"
  await db.friends
    .where('age')
    .below(25)
    .modify(friend => {
      friend.category = 'é’å¹´';
    });
  console.log('æ‰¹é‡æ›´æ–°å®Œæˆ');
}
```

### 4. åˆ é™¤ï¼ˆDeleteï¼‰

```javascript
// åˆ é™¤å•ä¸ªè®°å½•
async function deleteFriend(id) {
  try {
    await db.friends.delete(id);
    console.log(`ID ${id} åˆ é™¤æˆåŠŸ`);
  } catch (error) {
    console.error('åˆ é™¤å¤±è´¥:', error);
  }
}

// æ‰¹é‡åˆ é™¤
async function bulkDeleteFriends() {
  // åˆ é™¤æ‰€æœ‰å¹´é¾„å¤§äº 60 çš„æœ‹å‹
  await db.friends
    .where('age')
    .above(60)
    .delete();
  console.log('æ‰¹é‡åˆ é™¤å®Œæˆ');
}

// æ¸…ç©ºæ•´ä¸ªè¡¨
async function clearAllFriends() {
  await db.friends.clear();
  console.log('friends è¡¨å·²æ¸…ç©º');
}
```

## ğŸ” å››ã€é«˜çº§æŸ¥è¯¢åŠŸèƒ½

Dexie.js æä¾›äº†å¼ºå¤§çš„æŸ¥è¯¢èƒ½åŠ›ï¼Œç±»ä¼¼ SQL ä½†è¯­æ³•æ›´ç®€æ´ã€turn0search1ã€‘ã€‚

### èŒƒå›´æŸ¥è¯¢

```javascript
// æŸ¥è¯¢å¹´é¾„åœ¨ 25 åˆ° 35 ä¹‹é—´çš„æœ‹å‹
async function getFriendsInAgeRange() {
  const friends = await db.friends
    .where('age')
    .between(25, 35, true, true) // åŒ…å«è¾¹ç•Œå€¼
    .toArray();
  console.log('å¹´é¾„åœ¨ 25-35 ä¹‹é—´çš„æœ‹å‹:', friends);
  return friends;
}
```

### å¤šæ¡ä»¶æŸ¥è¯¢

```javascript
// æŸ¥è¯¢å¹´é¾„å¤§äº 25 ä¸”æ ‡ç­¾åŒ…å«"å‰ç«¯"çš„æœ‹å‹
async function getFrontendDevelopers() {
  const developers = await db.friends
    .where('age')
    .above(25)
    .and(friend => friend.tags && friend.tags.includes('å‰ç«¯'))
    .toArray();
  console.log('å‰ç«¯å¼€å‘äººå‘˜:', developers);
  return developers;
}
```

### ä½¿ç”¨å¤åˆç´¢å¼•

```javascript
// å¦‚æœç»å¸¸æŒ‰å§“åå’Œå¹´é¾„ç»„åˆæŸ¥è¯¢ï¼Œå¯ä»¥å®šä¹‰å¤åˆç´¢å¼•
db.version(2).stores({
  friends: '++id, name, age, email, *tags, [name+age]'
});

// ä½¿ç”¨å¤åˆç´¢å¼•æŸ¥è¯¢
async function getFriendByNameAndAge(name, age) {
  const friend = await db.friends
    .where('[name+age]')
    .equals([name, age])
    .first();
  console.log('å¤åˆç´¢å¼•æŸ¥è¯¢ç»“æœ:', friend);
  return friend;
}
```

### æ’åºä¸åˆ†é¡µ

```javascript
// æŒ‰å¹´é¾„é™åºæ’åºï¼Œå¹¶åˆ†é¡µæ˜¾ç¤º
async function getFriendsByPage(page = 1, pageSize = 10) {
  const friends = await db.friends
    .orderBy('age')
    .reverse()
    .offset((page - 1) * pageSize)
    .limit(pageSize)
    .toArray();
  console.log(`ç¬¬ ${page} é¡µçš„æœ‹å‹:`, friends);
  return friends;
}
```

## ğŸ”„ äº”ã€äº‹åŠ¡å¤„ç†

äº‹åŠ¡ç¡®ä¿å¤šä¸ªæ•°æ®åº“æ“ä½œçš„åŸå­æ€§ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€turn0search4ã€‘ã€‚

```javascript
// ä½¿ç”¨äº‹åŠ¡æ·»åŠ æœ‹å‹å’Œæ¸¸æˆè®°å½•
async function addFriendWithGameSession(friendData, gameData) {
  try {
    await db.transaction('rw', [db.friends, db.gameSessions], async () => {
      // æ·»åŠ æœ‹å‹
      const friendId = await db.friends.add(friendData);
      
      // æ·»åŠ æ¸¸æˆè®°å½•
      await db.gameSessions.add({
        ...gameData,
        friendId: friendId,
        playedAt: new Date()
      });
      
      console.log('äº‹åŠ¡æˆåŠŸï¼šæœ‹å‹å’Œæ¸¸æˆè®°å½•å·²æ·»åŠ ');
    });
  } catch (error) {
    console.error('äº‹åŠ¡å¤±è´¥:', error);
  }
}
```

## âš¡ å…­ã€å“åº”å¼æ•°æ®ç»‘å®šï¼ˆReact é›†æˆï¼‰

Dexie.js æä¾›äº† `dexie-react-hooks` åŒ…ï¼Œå®ç°æ•°æ®åº“çŠ¶æ€ä¸ React ç»„ä»¶çŠ¶æ€çš„è‡ªåŠ¨åŒæ­¥ã€turn0search2ã€‘ã€‚

### å®‰è£…ä¾èµ–

```bash
npm install dexie-react-hooks
```

### React ç»„ä»¶ç¤ºä¾‹

```jsx
import React, { useState } from 'react';
import { useLiveQuery } from 'dexie-react-hooks';
import { db } from './database'; // å‡è®¾æ•°æ®åº“é…ç½®åœ¨æ­¤æ–‡ä»¶

function FriendManager() {
  const [newFriend, setNewFriend] = useState({ name: '', age: '' });
  
  // å®æ—¶æŸ¥è¯¢ï¼šæ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
  const friends = useLiveQuery(() => 
    db.friends
      .orderBy('name')
      .toArray()
  );
  
  // æ·»åŠ æœ‹å‹
  const handleAddFriend = async () => {
    if (!newFriend.name || !newFriend.age) return;
    
    try {
      await db.friends.add({
        name: newFriend.name,
        age: parseInt(newFriend.age),
        email: `${newFriend.name.toLowerCase()}@example.com`,
        tags: []
      });
      setNewFriend({ name: '', age: '' });
    } catch (error) {
      console.error('æ·»åŠ å¤±è´¥:', error);
    }
  };
  
  // åˆ é™¤æœ‹å‹
  const handleDeleteFriend = async (id) => {
    try {
      await db.friends.delete(id);
    } catch (error) {
      console.error('åˆ é™¤å¤±è´¥:', error);
    }
  };
  
  return (
    <div>
      <h2>æœ‹å‹åˆ—è¡¨</h2>
      
      {/* æ·»åŠ è¡¨å• */}
      <div>
        <input
          type="text"
          placeholder="å§“å"
          value={newFriend.name}
          onChange={(e) => setNewFriend({...newFriend, name: e.target.value})}
        />
        <input
          type="number"
          placeholder="å¹´é¾„"
          value={newFriend.age}
          onChange={(e) => setNewFriend({...newFriend, age: e.target.value})}
        />
        <button onClick={handleAddFriend}>æ·»åŠ </button>
      </div>
      
      {/* æœ‹å‹åˆ—è¡¨ */}
      <ul>
        {friends?.map(friend => (
          <li key={friend.id}>
            <span>{friend.name} - {friend.age}å²</span>
            <button onClick={() => handleDeleteFriend(friend.id)}>åˆ é™¤</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default FriendManager;
```

## ğŸ“Š ä¸ƒã€æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†ä¸è¿ç§»

éšç€åº”ç”¨è¿­ä»£ï¼Œæ•°æ®åº“ç»“æ„å¯èƒ½éœ€è¦å˜æ›´ï¼ŒDexie.js æä¾›äº†ä¼˜é›…çš„ç‰ˆæœ¬ç®¡ç†æœºåˆ¶ã€turn0search0ã€‘ã€‚

```javascript
// æ•°æ®åº“ç‰ˆæœ¬å‡çº§ç¤ºä¾‹
db.version(2).stores({
  // ä¿®æ”¹ friends è¡¨ç»“æ„ï¼šæ·»åŠ  email å­—æ®µï¼Œåˆ›å»ºå¤åˆç´¢å¼•
  friends: '++id, name, age, email, *tags, [name+age]',
  // æ–°å¢ notes è¡¨
  notes: '++id, content, createdAt, friendId'
}).upgrade(tx => {
  // æ•°æ®è¿ç§»é€»è¾‘ï¼šä¸ºç°æœ‰æœ‹å‹æ·»åŠ  email å­—æ®µ
  return tx.table('friends').toCollection().modify(friend => {
    // å¦‚æœæ²¡æœ‰ emailï¼Œåˆ™æ ¹æ®å§“åç”Ÿæˆ
    if (!friend.email) {
      friend.email = `${friend.name.toLowerCase()}@example.com`;
    }
  });
});

// ç‰ˆæœ¬ 3ï¼šæ·»åŠ æ›´å¤šè¡¨å’Œå­—æ®µ
db.version(3).stores({
  friends: '++id, name, age, email, *tags, [name+age], createdAt',
  notes: '++id, content, createdAt, friendId, updatedAt',
  settings: '++id, key, value'
}).upgrade(tx => {
  // ä¸ºæ‰€æœ‰æœ‹å‹æ·»åŠ åˆ›å»ºæ—¶é—´
  return tx.table('friends').toCollection().modify(friend => {
    friend.createdAt = new Date();
  });
});
```

## ğŸ¯ å…«ã€æœ€ä½³å®è·µå»ºè®®

### 1. é”™è¯¯å¤„ç†

```javascript
// å…¨å±€é”™è¯¯å¤„ç†
db.on('error', error => {
  console.error('æ•°æ®åº“é”™è¯¯:', error);
});

// æ“ä½œçº§é”™è¯¯å¤„ç†
async function safeOperation() {
  try {
    await db.friends.add({ name: 'ç‹äº”' }); // å¯èƒ½ç¼ºå°‘å¿…å¡«å­—æ®µ
  } catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error);
    // å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œç”¨æˆ·é€šçŸ¥æˆ–å›é€€æ“ä½œ
  }
}
```

### 2. æ•°æ®æ¨¡å‹è®¾è®¡

```typescript
// ä½¿ç”¨ TypeScript å®šä¹‰æ•°æ®æ¨¡å‹
interface Friend {
  id?: number;
  name: string;
  age: number;
  email: string;
  tags?: string[];
  createdAt?: Date;
  updatedAt?: Date;
}

// æ‰©å±• Dexie ç±»ä»¥è·å¾—ç±»å‹å®‰å…¨
class FriendDatabase extends Dexie {
  friends: Dexie.Table<Friend, number>;
  
  constructor() {
    super('FriendDatabase');
    this.version(1).stores({
      friends: '++id, name, age, email, *tags'
    });
    this.friends = this.table('friends');
  }
}

const db = new FriendDatabase();
```

### 3. æ€§èƒ½ä¼˜åŒ–

<details>
<summary>ğŸ”§ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</summary>

```javascript
// 1. ä½¿ç”¨æ‰¹é‡æ“ä½œä»£æ›¿å¾ªç¯å•æ¡æ“ä½œ
const friendsToAdd = [/* å¤§é‡æœ‹å‹æ•°æ® */];
await db.friends.bulkAdd(friendsToAdd); // æ€§èƒ½ä¼˜äºå¾ªç¯è°ƒç”¨ add

// 2. åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
const friendNames = await db.friends
  .where('age')
  .above(20)
  .keys(); // åªè·å–ä¸»é”®æ•°ç»„

// 3. ä½¿ç”¨ç´¢å¼•è¦†ç›–æŸ¥è¯¢
const friendsWithEmail = await db.friends
  .where('email')
  .startsWith('admin')
  .toArray();

// 4. é¿å…åœ¨æŸ¥è¯¢ä¸­åˆ é™¤æˆ–ä¿®æ”¹æ•°æ®
// é”™è¯¯ç¤ºä¾‹ï¼š
await db.friends.where('age').above(30).delete(); // è¿™ä¼šå¯¼è‡´ç´¢å¼•é‡å»º
// æ­£ç¡®ç¤ºä¾‹ï¼šå…ˆæŸ¥è¯¢å†åˆ é™¤
const oldFriends = await db.friends.where('age').above(30).toArray();
await db.friends.bulkDelete(oldFriends.map(f => f.id));
```

</details>

## ğŸš€ ä¹ã€å®Œæ•´ç¤ºä¾‹è¿è¡ŒæŒ‡å—

### é¡¹ç›®ç»“æ„
```
dexie-example/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database.js        # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ FriendManager.jsx  # React ç»„ä»¶
â”‚   â””â”€â”€ App.jsx            # ä¸»åº”ç”¨
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js
```

### å®Œæ•´ä»£ç 

<details>
<summary>ğŸ“ database.js</summary>

```javascript
import Dexie from 'dexie';

class FriendDatabase extends Dexie {
  constructor() {
    super('FriendDatabase');
    
    this.version(1).stores({
      friends: '++id, name, age, email, *tags, [name+age]',
      gameSessions: '++id, friendId, score, playedAt'
    });
    
    this.friends = this.table('friends');
    this.gameSessions = this.table('gameSessions');
  }
  
  // æ·»åŠ æœ‹å‹
  async addFriend(friend) {
    return await this.friends.add({
      ...friend,
      createdAt: new Date(),
      updatedAt: new Date()
    });
  }
  
  // è·å–æ‰€æœ‰æœ‹å‹
  async getAllFriends() {
    return await this.friends.orderBy('name').toArray();
  }
  
  // è·å–å¹´è½»æœ‹å‹
  async getYoungFriends() {
    return await this.friends
      .where('age')
      .below(30)
      .toArray();
  }
  
  // æ›´æ–°æœ‹å‹ä¿¡æ¯
  async updateFriend(id, updates) {
    return await this.friends.update(id, {
      ...updates,
      updatedAt: new Date()
    });
  }
  
  // åˆ é™¤æœ‹å‹
  async deleteFriend(id) {
    return await this.friends.delete(id);
  }
}

export const db = new FriendDatabase();
```

</details>

<details>
<summary>ğŸ“ FriendManager.jsx</summary>

```jsx
import React, { useState } from 'react';
import { useLiveQuery } from 'dexie-react-hooks';
import { db } from './database';

function FriendManager() {
  const [newFriend, setNewFriend] = useState({ name: '', age: '', email: '' });
  const [editingId, setEditingId] = useState(null);
  const [editForm, setEditForm] = useState({});
  
  // å®æ—¶æŸ¥è¯¢æœ‹å‹æ•°æ®
  const friends = useLiveQuery(() => db.getAllFriends());
  
  // æ·»åŠ æœ‹å‹
  const handleAddFriend = async () => {
    if (!newFriend.name || !newFriend.age) return;
    
    try {
      await db.addFriend({
        name: newFriend.name,
        age: parseInt(newFriend.age),
        email: newFriend.email || `${newFriend.name.toLowerCase()}@example.com`,
        tags: []
      });
      setNewFriend({ name: '', age: '', email: '' });
    } catch (error) {
      console.error('æ·»åŠ å¤±è´¥:', error);
    }
  };
  
  // å¼€å§‹ç¼–è¾‘
  const handleEdit = (friend) => {
    setEditingId(friend.id);
    setEditForm({ ...friend });
  };
  
  // ä¿å­˜ç¼–è¾‘
  const handleSaveEdit = async () => {
    try {
      await db.updateFriend(editingId, editForm);
      setEditingId(null);
      setEditForm({});
    } catch (error) {
      console.error('æ›´æ–°å¤±è´¥:', error);
    }
  };
  
  // å–æ¶ˆç¼–è¾‘
  const handleCancelEdit = () => {
    setEditingId(null);
    setEditForm({});
  };
  
  // åˆ é™¤æœ‹å‹
  const handleDeleteFriend = async (id) => {
    if (window.confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæœ‹å‹å—ï¼Ÿ')) {
      try {
        await db.deleteFriend(id);
      } catch (error) {
        console.error('åˆ é™¤å¤±è´¥:', error);
      }
    }
  };
  
  return (
    <div>
      <h2>æœ‹å‹ç®¡ç†ç³»ç»Ÿ</h2>
      
      {/* æ·»åŠ è¡¨å• */}
      <div>
        <h3>æ·»åŠ æ–°æœ‹å‹</h3>
        <input
          type="text"
          placeholder="å§“å"
          value={newFriend.name}
          onChange={(e) => setNewFriend({...newFriend, name: e.target.value})}
        />
        <input
          type="number"
          placeholder="å¹´é¾„"
          value={newFriend.age}
          onChange={(e) => setNewFriend({...newFriend, age: e.target.value})}
        />
        <input
          type="email"
          placeholder="é‚®ç®±ï¼ˆå¯é€‰ï¼‰"
          value={newFriend.email}
          onChange={(e) => setNewFriend({...newFriend, email: e.target.value})}
        />
        <button onClick={handleAddFriend}>æ·»åŠ æœ‹å‹</button>
      </div>
      
      {/* æœ‹å‹åˆ—è¡¨ */}
      <div>
        <h3>æœ‹å‹åˆ—è¡¨ ({friends?.length || 0} ä½)</h3>
        {friends?.map(friend => (
          <div key={friend.id}>
            {editingId === friend.id ? (
              // ç¼–è¾‘æ¨¡å¼
              <div>
                <input
                  type="text"
                  value={editForm.name}
                  onChange={(e) => setEditForm({...editForm, name: e.target.value})}
                />
                <input
                  type="number"
                  value={editForm.age}
                  onChange={(e) => setEditForm({...editForm, age: parseInt(e.target.value)})}
                />
                <input
                  type="email"
                  value={editForm.email}
                  onChange={(e) => setEditForm({...editForm, email: e.target.value})}
                />
                <button onClick={handleSaveEdit}>ä¿å­˜</button>
                <button onClick={handleCancelEdit}>å–æ¶ˆ</button>
              </div>
            ) : (
              // æŸ¥çœ‹æ¨¡å¼
              <div>
                <span>{friend.name} - {friend.age}å² - {friend.email}</span>
                <button onClick={() => handleEdit(friend)}>ç¼–è¾‘</button>
                <button onClick={() => handleDeleteFriend(friend.id)}>åˆ é™¤</button>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
}

export default FriendManager;
```

</details>

### è¿è¡Œæ­¥éª¤

1. **åˆ›å»ºé¡¹ç›®**
```bash
npm create vite@latest dexie-example -- --template react
cd dexie-example
npm install dexie dexie-react-hooks
```

2. **å¤åˆ¶ä¸Šè¿°ä»£ç åˆ°ç›¸åº”æ–‡ä»¶**

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

4. **åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€** `http://localhost:5173`

## ğŸ“ˆ åã€æ€»ç»“ä¸è¿›é˜¶

è¿™ä¸ªå®Œæ•´ç¤ºä¾‹å±•ç¤ºäº† Dexie.js çš„æ ¸å¿ƒç”¨æ³•ï¼š

| åŠŸèƒ½      | å®ç°æ–¹å¼                                 | é€‚ç”¨åœºæ™¯       |
| --------- | ---------------------------------------- | -------------- |
| åŸºç¡€ CRUD | `add()`, `get()`, `update()`, `delete()` | ç®€å•æ•°æ®ç®¡ç†   |
| æ‰¹é‡æ“ä½œ  | `bulkAdd()`, `bulkPut()`, `bulkDelete()` | å¤§æ•°æ®é‡å¤„ç†   |
| å¤æ‚æŸ¥è¯¢  | `where()`, `between()`, `and()`          | å¤šæ¡ä»¶ç­›é€‰     |
| äº‹åŠ¡å¤„ç†  | `transaction()`                          | å¤šè¡¨æ“ä½œåŸå­æ€§ |
| å“åº”å¼ UI | `useLiveQuery()`                         | å®æ—¶æ•°æ®åŒæ­¥   |

### è¿›é˜¶å­¦ä¹ æ–¹å‘

1. **Dexie Cloud**ï¼šå®ç°å¤šè®¾å¤‡æ•°æ®åŒæ­¥ã€turn0search10ã€‘
2. **Observable æ’ä»¶**ï¼šç›‘å¬æ•°æ®å˜åŒ–ã€turn0search34ã€‘
3. **ä¸ Vue/Angular é›†æˆ**ï¼šä¸åŒæ¡†æ¶çš„é€‚é…æ–¹æ¡ˆã€turn0search3ã€‘
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šç´¢å¼•ç­–ç•¥ã€æŸ¥è¯¢ä¼˜åŒ–ã€turn0search18ã€‘

é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº† Dexie.js çš„æ ¸å¿ƒç”¨æ³•ã€‚æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚ï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•æ›´å¤æ‚çš„åŠŸèƒ½ã€‚
